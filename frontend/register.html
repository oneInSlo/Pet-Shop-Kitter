<!DOCTYPE html>

    <html lang="en">

        <head>

            <meta charset="UTF-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="title" content="Kitter - High Quality Pet Food">
            <meta name="description" content="Welcome To Kitter!">

            <title>REGISTER - Kitter: High Quality Pet Food</title>

            <link rel="icon" href="./assets/images/service-about-image.png">
            <link rel="stylesheet" href="./assets/css/style.css">
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Carter+One&family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet">

            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
            
        </head>

        <body onload="loadBackgroundColor()">

            <header class="header" id="header"  data-header>

                <div class="container-fluid" data-nav-toggler>
                
                    <ul class="nav flex-column flex-sm-row">
                        <li class="nav-item flex-grow-1 d-flex align-items-center">
                            <a href="index.html" class="nav-link logo text-black">Kitter</a>
                        </li>
                        <li class="nav-item d-flex align-items-center">
                            <a href="index.html" class="nav-link text-black fs-3" data-nav-link>Home</a>
                          </li>
            
                          <li class="nav-item d-flex align-items-center">
                            <a href="about.html" class="nav-link text-black fs-3" data-nav-link>About Us</a>
                          </li>
            
                          <li class="nav-item d-flex align-items-center">
                            <a href="shop.html" class="nav-link text-black fs-3" data-nav-link>Shop</a>
                          </li>
            
                          <li class="nav-item d-flex align-items-center">
                            <a href="kosarica.html" class="nav-link text-black fs-3" data-nav-link>Cart</a>
                          </li>
            
                          <li class="nav-item d-flex align-items-center">
                            <a href="register.html" class="nav-link text-black fs-3" data-nav-link>Register</a>
                          </li>
            
                          <li class="nav-item d-flex align-items-center me-4">
                            <a href="settings.html" class="nav-link text-black fs-3" data-nav-link>Settings</a>
                          </li>
            
                          <li class="nav-item d-flex align-items-center">
                            <span id="formattedDate" class="nav-link bg-danger-subtle rounded text-black px-4 me-3 fs-3"></span>
                          </li>
            
                    </ul>
            
                  </div>
            
              </header>

            <main>

                <div class="container-reg" id="box-cont">
                    <h1 class="text-center text-danger display-2 mb-5">User Registration</h1>
                    <form id="registrationForm" method="GET" action="register.html" class="form-horizontal">
                        <div class="mb-3">
                            <label class="form-label fs-4">Title:</label>
                            <select class="form-select fs-5" id="title" name="title">
                                <option value="Select" selected="true" disabled="disabled">Select</option>
                                <option value="Mr.">Mr.</option>
                                <option value="Mrs.">Mrs.</option>
                                <option value="Miss">Miss</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="firstName">First Name:</label>
                            <input type="text" class="form-control fs-5" id="firstName" name="firstName" maxlength="50" placeholder="Your First Name" onblur="upperCase('firstName')">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="lastName">Last Name:</label>
                            <input type="text" class="form-control fs-5" id="lastName" name="lastName" maxlength="50" placeholder="Your Last Name" onblur="upperCase('lastName')">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="email">Email:</label>
                            <input type="email" class="form-control fs-5" id="email" name="email" placeholder="Your Email" onblur="upperCase('email')">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="password1">Password:</label>
                            <input type="password" class="form-control fs-5" id="password1" name="password1" placeholder="Your Password">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="password2">Confirm Password:</label>
                            <input type="password" class="form-control fs-5" id="password2" name="password2" placeholder="Confirm Password">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="address">Address:</label>
                            <input type="text" class="form-control fs-5" id="address" name="address" placeholder="Your Address" onblur="upperCase('address')">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="houseNumber">House Number:</label>
                            <input type="number" class="form-control fs-5" id="houseNumber" name="houseNumber" placeholder="Your House Number" min="1">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="postalCode">Postal Code:</label>
                            <input type="number" class="form-control fs-5" id="postalCode" name="postalCode" placeholder="Your Postal Code">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="city">City:</label>
                            <input type="text" class="form-control fs-5" id="city" name="city" placeholder="Your City" onblur="upperCase('city')">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="dob">Date of Birth:</label>
                            <input type="date" class="form-control fs-5" id="dob" name="dob">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fs-4" for="userNotes">User Notes:</label>
                            <textarea class="form-control fs-5" id="userNotes" name="userNotes" placeholder="Your Notes" maxlength="300"></textarea>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input fs-5" id="termsAgreement" name="termsAgreement">
                            <label class="form-check-label fs-5" for="termsAgreement">I agree to the terms of use of the online store.</label>
                        </div>
                        <div class="mt-5 row">
                            <button type="submit" class="btn btn-danger fs-4 col-12 col-sm-6" id="register-btn" name="register">Register</button>
                            <button type="reset" class="btn btn-dark fs-4 col-12 col-sm-6">Reset</button>
                        </div>
                    </form>
                    <div id="notification" class="notification"></div>
                </div>
                
            </main>

        
            <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
            <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
            <script src="./assets/js/script.js"></script>

            <script> 

                document.getElementById('registrationForm').addEventListener('submit', function(event) {

                document.getElementById('notification').innerText = '';
                displayNotification('');

                if (validate()) {
                    
                } else {
                    event.preventDefault();
                }

                });

                function validate() {
                    let title = document.getElementById('title').value;
                    let firstName = document.getElementById('firstName').value;
                    let lastName = document.getElementById('lastName').value;
                    let email = document.getElementById('email').value;
                    let password1 = document.getElementById('password1').value;
                    let password2 = document.getElementById('password2').value;
                    let address = document.getElementById('address').value;
                    let houseNumber = document.getElementById('houseNumber').value;
                    let postalCode = document.getElementById('postalCode').value;
                    let city = document.getElementById('city').value;
                    let dob = document.getElementById('dob').value;
                    let userNotes = document.getElementById('userNotes').value;
                    let termsAgreement = document.getElementById('termsAgreement').checked;
                    
                    if (firstName.trim() === '') {
                        displayNotification('First name cannot be empty.');
                        return false;
                    }
                    if (lastName.trim() === '') {
                        displayNotification('Last name cannot be empty.');
                        return false;
                    }
                    if (!isValidEmail(email)) {
                        displayNotification('Please enter a valid email address.');
                        return false;
                    }
                    if (password1.length < 8) {
                        displayNotification('Password must be at least 8 characters.');
                        return false;
                    }
                    if (password1 !== password2) {
                        displayNotification('Passwords don\'t match.');
                        return false;
                    }
                    if (address.trim() === '') {
                        displayNotification('Address cannot be empty.');
                        return false;
                    }
                    if (parseInt(houseNumber) <= 0 || isNaN(parseInt(houseNumber))) {
                        displayNotification('Please enter a valid house number.');
                        return false;
                    }
                    if (parseInt(postalCode) < 1000 || parseInt(postalCode) > 9999 || isNaN(parseInt(postalCode))) {
                        displayNotification('Please enter a valid postal code.');
                        return false;
                    }

                    let today = new Date();
                    let birthDate = new Date(dob);
                    let age = today.getFullYear() - birthDate.getFullYear();
                    let monthDiff = today.getMonth() - birthDate.getMonth();
                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                        age--;
                    }
                    if (age < 18) {
                        displayNotification('You must be at least 18 years old to register.');
                        return false;
                    }
                    if (!termsAgreement) {
                        displayNotification('You must agree to the terms of use.');
                        return false;
                    }

                    return true;
                }

                function displayNotification(message) {
                    let notification = document.getElementById('notification');
                    notification.innerText = message;
                    if (message.trim() === '') {
                        notification.style.display = 'none';
                    } else {
                        notification.style.display = 'block';
                    }
                }

                function isValidEmail(email) {
                    let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    return emailRegex.test(email);
                }
                
                function upperCase(label) {
                    document.getElementById(label).value = document.getElementById(label).value.toUpperCase();
                }

            </script>

        </body>
    </html>
